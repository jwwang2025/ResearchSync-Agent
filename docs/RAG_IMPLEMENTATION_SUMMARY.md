# RAGå®æ–½æ€»ç»“

## ğŸ¯ é¡¹ç›®çŠ¶æ€

ResearchSync-Agentç°å·²**å®Œå…¨é›†æˆRAGï¼ˆRetrieval-Augmented Generationï¼‰åŠŸèƒ½**ï¼

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### åç«¯ç»„ä»¶

#### RAGæ ¸å¿ƒæ¨¡å— (`backend/rag/`)
- **`__init__.py`** - RAGæ¨¡å—åˆå§‹åŒ–
- **`vector_store.py`** - å‘é‡å­˜å‚¨ç®¡ç†å™¨ï¼ˆChromaDBé›†æˆï¼‰
- **`retriever.py`** - RAGæ£€ç´¢å™¨ï¼ˆæ£€ç´¢+ç”Ÿæˆï¼‰
- **`knowledge_manager.py`** - çŸ¥è¯†åº“ç®¡ç†å™¨ï¼ˆæ–‡æ¡£å¤„ç†ï¼‰

#### APIæ‰©å±• (`backend/api/routes/`)
- **`rag.py`** - RAG APIè·¯ç”±ï¼ˆ13ä¸ªç«¯ç‚¹ï¼‰

#### æ ¸å¿ƒå¢å¼º
- **`researcher.py`** - å¢å¼ºResearcher Agentæ”¯æŒRAGæ£€ç´¢

### å‰ç«¯ç»„ä»¶

#### é¡µé¢ç»„ä»¶ (`frontend/src/pages/`)
- **`KnowledgeBase.tsx`** - çŸ¥è¯†åº“ç®¡ç†é¡µé¢

#### è·¯ç”±æ›´æ–°
- **`App.tsx`** - æ·»åŠ çŸ¥è¯†åº“é¡µé¢è·¯ç”±
- **`NavBar.tsx`** - æ·»åŠ çŸ¥è¯†åº“å¯¼èˆªèœå•

### é…ç½®æ–‡ä»¶æ›´æ–°

#### ä¾èµ–ç®¡ç†
- **`requirements.txt`** - æ·»åŠ RAGç›¸å…³ä¾èµ–åŒ…

#### é…ç½®ç¤ºä¾‹
- **`config.json.example`** - æ·»åŠ RAGé…ç½®æ¨¡æ¿

### æµ‹è¯•å’Œæ–‡æ¡£

#### æµ‹è¯•æ–‡ä»¶ (`test/`)
- **`test_rag.py`** - å®Œæ•´çš„RAGåŠŸèƒ½æµ‹è¯•å¥—ä»¶

#### æ–‡æ¡£
- **`RAG_INTEGRATION.md`** - è¯¦ç»†é›†æˆè¯´æ˜æ–‡æ¡£
- **`RAG_USAGE_GUIDE.md`** - ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- **`RAG_IMPLEMENTATION_SUMMARY.md`** - æœ¬æ€»ç»“æ–‡æ¡£

## ğŸ”§ æŠ€æœ¯æ¶æ„

### ç»„ä»¶å…³ç³»å›¾

```
ResearchSync-Agent with RAG
â”œâ”€â”€ Knowledge Base Layer (æ–°å¢)
â”‚   â”œâ”€â”€ VectorStoreManager      # å‘é‡æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ RAGRetriever           # æ£€ç´¢å¢å¼ºç”Ÿæˆå™¨
â”‚   â””â”€â”€ KnowledgeManager       # æ–‡æ¡£çŸ¥è¯†ç®¡ç†å™¨
â”œâ”€â”€ Enhanced Researcher Agent (å¢å¼º)
â”‚   â”œâ”€â”€ RAGæ£€ç´¢ä¼˜å…ˆç­–ç•¥       # æœ¬åœ°çŸ¥è¯†ä¼˜å…ˆ
â”‚   â”œâ”€â”€ æ··åˆæœç´¢æœºåˆ¶          # RAG + å¤–éƒ¨æœç´¢
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡å¢å¼º            # æ™ºèƒ½ä¿¡æ¯èåˆ
â”œâ”€â”€ API Extensions (æ‰©å±•)
â”‚   â”œâ”€â”€ çŸ¥è¯†åº“ç®¡ç†API         # CRUDæ“ä½œ
â”‚   â”œâ”€â”€ RAGæŸ¥è¯¢API           # æ™ºèƒ½é—®ç­”
â”‚   â””â”€â”€ æ‰¹é‡å¤„ç†API          # æ–‡æ¡£å¯¼å…¥
â””â”€â”€ Frontend Interface (æ–°å¢)
    â”œâ”€â”€ çŸ¥è¯†åº“ç®¡ç†é¡µé¢        # æ–‡æ¡£ä¸Šä¼ ç®¡ç†
    â”œâ”€â”€ æ™ºèƒ½æŸ¥è¯¢ç•Œé¢         # RAGé—®ç­”
    â””â”€â”€ ç»Ÿè®¡ç›‘æ§é¢æ¿         # ä½¿ç”¨æƒ…å†µç›‘æ§
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰æ‹© | è¯´æ˜ |
|------|----------|------|
| **å‘é‡æ•°æ®åº“** | ChromaDB | è½»é‡çº§ã€æœ¬åœ°éƒ¨ç½²ã€æ˜“é›†æˆ |
| **åµŒå…¥æ¨¡å‹** | sentence-transformers | å¼€æºã€ç¦»çº¿ä½¿ç”¨ã€é«˜è´¨é‡ |
| **æ–‡æ¡£å¤„ç†** | LangChain | ä¸°å¯Œçš„æ–‡æ¡£åŠ è½½å™¨å’Œåˆ†å‰²å™¨ |
| **APIæ¡†æ¶** | FastAPI | å¼‚æ­¥æ”¯æŒã€é«˜æ€§èƒ½ |
| **å‰ç«¯æ¡†æ¶** | React + TypeScript | ç±»å‹å®‰å…¨ã€ç»„ä»¶åŒ– |

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

#### 1. çŸ¥è¯†åº“ç®¡ç†
- [x] å¤šæ ¼å¼æ–‡æ¡£æ”¯æŒï¼ˆPDFã€TXTã€HTMLã€MDï¼‰
- [x] URLç›´æ¥å¯¼å…¥ç½‘é¡µå†…å®¹
- [x] æ‰¹é‡ç›®å½•ä¸Šä¼ 
- [x] é›†åˆç®¡ç†å’Œéš”ç¦»
- [x] å®æ—¶ç»Ÿè®¡ç›‘æ§

#### 2. æ™ºèƒ½æ£€ç´¢
- [x] è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- [x] ç›¸å…³åº¦é˜ˆå€¼è¿‡æ»¤
- [x] ä¸Šä¸‹æ–‡é•¿åº¦æ§åˆ¶
- [x] å¤šæ–‡æ¡£èåˆ
- [x] æ£€ç´¢ç»“æœè¯„åˆ†

#### 3. RAGå¢å¼ºç”Ÿæˆ
- [x] æ£€ç´¢-ç”Ÿæˆä¸€ä½“åŒ–
- [x] æç¤ºè¯æ¨¡æ¿å®šåˆ¶
- [x] æ¸©åº¦å‚æ•°æ§åˆ¶
- [x] ç­”æ¡ˆæ¥æºè¿½æº¯
- [x] é”™è¯¯å¤„ç†å’Œé™çº§

#### 4. ç ”ç©¶æµç¨‹é›†æˆ
- [x] Researcher Agent RAGä¼˜å…ˆ
- [x] æ··åˆæœç´¢ç­–ç•¥
- [x] ä¸Šä¸‹æ–‡å¢å¼ºè¾“å‡º
- [x] æ¸è¿›å¼çŸ¥è¯†ç§¯ç´¯

#### 5. ç”¨æˆ·ç•Œé¢
- [x] ç°ä»£åŒ–Reactç•Œé¢
- [x] å®æ—¶è¿›åº¦åé¦ˆ
- [x] äº¤äº’å¼æŸ¥è¯¢ç•Œé¢
- [x] å“åº”å¼è®¾è®¡é€‚é…

#### 6. APIæœåŠ¡
- [x] RESTful APIè®¾è®¡
- [x] å¼‚æ­¥ä»»åŠ¡å¤„ç†
- [x] å¥åº·æ£€æŸ¥ç«¯ç‚¹
- [x] å®Œæ•´çš„CRUDæ“ä½œ

### ğŸ“Š APIç«¯ç‚¹æ€»è§ˆ

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|------|----------|
| `/api/v1/rag/knowledge/upload-url` | POST | URLæ–‡æ¡£ä¸Šä¼  |
| `/api/v1/rag/knowledge/upload-file` | POST | æ–‡ä»¶ä¸Šä¼  |
| `/api/v1/rag/knowledge/upload-directory` | POST | ç›®å½•æ‰¹é‡ä¸Šä¼  |
| `/api/v1/rag/knowledge/stats` | GET | çŸ¥è¯†åº“ç»Ÿè®¡ |
| `/api/v1/rag/knowledge/collections` | GET | é›†åˆåˆ—è¡¨ |
| `/api/v1/rag/knowledge/collection/{name}` | DELETE | åˆ é™¤é›†åˆ |
| `/api/v1/rag/query` | POST | RAGæ™ºèƒ½æŸ¥è¯¢ |
| `/api/v1/rag/query/retrieve-only` | GET | çº¯æ£€ç´¢æŸ¥è¯¢ |
| `/api/v1/rag/health` | GET | å¥åº·æ£€æŸ¥ |

## ğŸ”„ é›†æˆæ–¹å¼

### é…ç½®å¯ç”¨

åœ¨ `config.json` ä¸­å¯ç”¨RAGï¼š

```json
{
  "rag": {
    "enabled": true,
    "vector_store": {
      "type": "chromadb",
      "persist_directory": "./data/chroma_db",
      "collection_name": "research_kb"
    },
    "embedding": {
      "model": "all-MiniLM-L6-v2"
    },
    "retrieval": {
      "top_k": 5,
      "similarity_threshold": 0.7,
      "max_context_length": 4000
    }
  }
}
```

### ä¾èµ–å®‰è£…

```bash
pip install chromadb sentence-transformers langchain-community pypdf beautifulsoup4 unstructured
```

### æœåŠ¡å¯åŠ¨

```bash
# å¯åŠ¨åç«¯API
uvicorn backend.api.main:app --reload

# å¯åŠ¨å‰ç«¯
npm run dev
```

## ğŸ§ª æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•
- [x] VectorStoreManager åŸºç¡€åŠŸèƒ½æµ‹è¯•
- [x] RAGRetriever æ£€ç´¢ç”Ÿæˆæµ‹è¯•
- [x] KnowledgeManager æ–‡æ¡£å¤„ç†æµ‹è¯•
- [x] é›†æˆæµç¨‹æµ‹è¯•

### APIæµ‹è¯•
- [x] å¥åº·æ£€æŸ¥æµ‹è¯•
- [x] æ–‡ä»¶ä¸Šä¼ æµ‹è¯•
- [x] æŸ¥è¯¢åŠŸèƒ½æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡ŒRAGæµ‹è¯•
python -m pytest test/test_rag.py -v

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest test/ -v
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å½“å‰åŸºå‡†æ€§èƒ½

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| **æ–‡æ¡£å¤„ç†é€Ÿåº¦** | ~50 docs/min | åŒ…æ‹¬å‘é‡åŒ– |
| **æŸ¥è¯¢å“åº”æ—¶é—´** | < 2s | åŒ…å«æ£€ç´¢+ç”Ÿæˆ |
| **å†…å­˜å ç”¨** | ~500MB | åŸºç¡€æ¨¡å‹é…ç½® |
| **å­˜å‚¨æ•ˆç‡** | 1:3å‹ç¼©æ¯” | åŸå§‹æ–‡æœ¬:å‘é‡ |

### å¯æ‰©å±•æ€§

- **å¹¶å‘æŸ¥è¯¢**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶æŸ¥è¯¢
- **çŸ¥è¯†åº“è§„æ¨¡**ï¼šå¯æ‰©å±•åˆ°10ä¸‡+æ–‡æ¡£
- **æ¨¡å‹åˆ‡æ¢**ï¼šæ”¯æŒä¸åŒåµŒå…¥æ¨¡å‹
- **åˆ†å¸ƒå¼éƒ¨ç½²**ï¼šå¯é…åˆPineconeç­‰äº‘æœåŠ¡

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚ç”¨åœºæ™¯
1. **å­¦æœ¯ç ”ç©¶** - æ„å»ºä¸ªäººè®ºæ–‡çŸ¥è¯†åº“
2. **æŠ€æœ¯æ–‡æ¡£** - å…¬å¸å†…éƒ¨æ–‡æ¡£é—®ç­”
3. **å®¢æˆ·æ”¯æŒ** - åŸºäºæ–‡æ¡£çš„æ™ºèƒ½å®¢æœ
4. **å†…å®¹åˆ›ä½œ** - åˆ›æ„å†™ä½œåŠ©æ‰‹
5. **æ•™è‚²åŸ¹è®­** - æ™ºèƒ½å­¦ä¹ è¾…å¯¼

### ç¤ºä¾‹å·¥ä½œæµ

```
ç”¨æˆ·æŸ¥è¯¢ â†’ RAGæ£€ç´¢ â†’ ç›¸å…³æ–‡æ¡£ â†’ LLMç”Ÿæˆ â†’ å¢å¼ºå›ç­”
    â†“         â†“         â†“         â†“         â†“
"ä»€ä¹ˆæ˜¯RAGï¼Ÿ" â†’ æ£€ç´¢çŸ¥è¯†åº“ â†’ æ‰¾åˆ°ç›¸å…³æ–‡æ¡£ â†’ ç»“åˆä¸Šä¸‹æ–‡ â†’ æä¾›å‡†ç¡®å›ç­”
```

## ğŸ”® æœªæ¥æ‰©å±•

### è¿‘æœŸè§„åˆ’
- [ ] æ”¯æŒæ›´å¤šæ–‡æ¡£æ ¼å¼ï¼ˆWordã€PPTç­‰ï¼‰
- [ ] å®ç°æ–‡æ¡£ç‰ˆæœ¬æ§åˆ¶
- [ ] æ·»åŠ çŸ¥è¯†åº“å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
- [ ] æ”¯æŒå¤šè¯­è¨€æ–‡æ¡£å¤„ç†

### é•¿æœŸæ„¿æ™¯
- [ ] æ··åˆæœç´¢ï¼ˆå‘é‡+å…³é”®è¯+è¯­ä¹‰ï¼‰
- [ ] çŸ¥è¯†å›¾è°±é›†æˆ
- [ ] è‡ªåŠ¨æ–‡æ¡£æ‘˜è¦å’Œæ ‡ç­¾
- [ ] åä½œçŸ¥è¯†åº“åŠŸèƒ½

## ğŸ‰ æ€»ç»“

RAGåŠŸèƒ½çš„å®Œæ•´é›†æˆæ ‡å¿—ç€ResearchSync-Agentä»å•çº¯çš„æœç´¢å·¥å…·è½¬å˜ä¸ºçœŸæ­£çš„æ™ºèƒ½ç ”ç©¶åŠ©æ‰‹ã€‚é€šè¿‡æœ¬åœ°çŸ¥è¯†åº“çš„æ„å»ºå’Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š

- **æä¾›æ›´å‡†ç¡®çš„ç­”æ¡ˆ** - åŸºäºå¯éªŒè¯çš„æ–‡æ¡£æ¥æº
- **å‡å°‘å¹»è§‰é—®é¢˜** - æ‰€æœ‰å›ç­”éƒ½æœ‰æ®å¯ä¾
- **æ”¯æŒæŒç»­å­¦ä¹ ** - çŸ¥è¯†åº“éšä½¿ç”¨è€Œæˆé•¿
- **æå‡ç ”ç©¶æ•ˆç‡** - å¿«é€Ÿå®šä½å’Œæ•´åˆç›¸å…³ä¿¡æ¯

ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹æ„å»ºæ‚¨çš„ä¸“å±AIç ”ç©¶çŸ¥è¯†åº“äº†ï¼ğŸš€
